// Color Variables
$primary-color: #af2318;
$text-color: #333;
$light-gray: #f5f5f5;
$border-color: #ddd;
$checkbox-border: #cecece;
$completed-text: #d9d9d9;
$button-hover: #e8e8e8;
$button-active: #ededed;
$empty-state-color: #999;

// Typography Variables
$base-font-size: 14px;
$title-font-size: 32px;
$base-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
  Ubuntu, Cantarell, sans-serif;

// Spacing Variables
$spacing-unit: 8px;

// Mixin for flexbox
@mixin flex($direction: row, $justify: flex-start, $align: center) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
}

// Mixin for focus states
@mixin focus-styles {
  outline: none;
  box-shadow: inset 0 -2px 5px rgba(0, 0, 0, 0.1);
}

// Mixin for button hover
@mixin button-hover {
  &:hover {
    background: $button-hover;
    border-color: #999;
  }

  &:active {
    background: $button-active;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
  }
}

// Main container
:host {
  --todo-bg: #fff;
  --todo-shadow: rgba(0, 0, 0, 0.2);

  font-family: $base-font-family;
  font-size: $base-font-size;
  color: $text-color;
}

.todo-mvc-container {
  max-width: 550px;
  margin: #{$spacing-unit * 3} auto;
  background: var(--todo-bg);
  box-shadow: 0 2px 4px var(--todo-shadow), 0 25px 50px rgba(0, 0, 0, 0.15);
  border-radius: 2px;
  padding: #{$spacing-unit * 2};

  h1 {
    font-size: $title-font-size;
    font-weight: 100;
    text-align: center;
    color: $primary-color;
    margin: 0 0 #{$spacing-unit * 3} 0;
    text-rendering: optimizeLegibility;
    letter-spacing: -1px;
  }
}

// Input Section
.input-section {
  @include flex(row, flex-start, stretch);
  gap: #{$spacing-unit};
  margin-bottom: #{$spacing-unit * 3};
}

.todo-input {
  flex: 1;
  padding: #{$spacing-unit + 2}px #{$spacing-unit * 1.5}px;
  border: 1px solid $border-color;
  border-radius: 2px;
  font-size: $base-font-size;
  font-family: inherit;
  background: rgba(0, 0, 0, 0.003);
  box-shadow: inset 0 -1px 5px rgba(0, 0, 0, 0.03);
  transition: box-shadow 0.4s;

  &:focus {
    @include focus-styles;
    background-color: #fafafa;
  }

  &::placeholder {
    color: $empty-state-color;
    font-style: italic;
    opacity: 0.6;
  }
}

.add-button {
  padding: #{$spacing-unit + 2}px #{$spacing-unit * 2}px;
  background: $light-gray;
  border: 1px solid $border-color;
  border-radius: 2px;
  font-size: $base-font-size;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;

  @include button-hover;

  &:focus {
    @include focus-styles;
  }
}

// Stats Section
.stats {
  @include flex(row, space-around);
  padding: #{$spacing-unit * 1.5}px #{$spacing-unit}px;
  background: $light-gray;
  border-top: 1px solid $border-color;
  border-bottom: 1px solid $border-color;
  font-size: 12px;
  color: $empty-state-color;
  margin-bottom: #{$spacing-unit * 2}px;

  span {
    padding: #{$spacing-unit / 2}px 0;

    &::before {
      content: '';
      display: inline-block;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      background: $primary-color;
      margin-right: #{$spacing-unit / 2}px;
      vertical-align: middle;
    }
  }
}

// Todo List
.todo-list {
  list-style: none;
  margin: 0;
  padding: 0;
  border-top: 1px solid $border-color;
}

.todo-item {
  @include flex(row, flex-start, center);
  padding: #{$spacing-unit}px;
  border-bottom: 1px solid $border-color;
  transition: background-color 0.2s ease;

  &:hover {
    background: rgba(0, 0, 0, 0.02);
  }

  &:last-child {
    border-bottom: none;
  }

  &.completed {
    opacity: 0.6;

    .todo-checkbox {
      background: $primary-color;
      border-color: $primary-color;

      &::after {
        content: 'âœ“';
        color: white;
        position: absolute;
        font-size: 11px;
        font-weight: bold;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
    }

    .todo-text {
      color: $completed-text;
      text-decoration: line-through;
    }
  }
}

// Checkbox
.todo-checkbox {
  width: 20px;
  height: 20px;
  min-width: 20px;
  margin-right: #{$spacing-unit * 1.5}px;
  cursor: pointer;
  accent-color: $primary-color;
  position: relative;
  appearance: none;
  border: 1px solid $checkbox-border;
  border-radius: 2px;
  background: white;
  transition: all 0.2s ease;

  &:hover {
    border-color: $primary-color;
  }

  &:focus {
    outline: 2px solid $primary-color;
    outline-offset: 1px;
  }
}

// Todo Text
.todo-text {
  flex: 1;
  word-wrap: break-word;
  overflow-wrap: break-word;
  color: $text-color;
  transition: color 0.2s ease;
}

// Delete Button
.delete-button {
  padding: #{$spacing-unit / 2}px #{$spacing-unit}px;
  margin-left: #{$spacing-unit}px;
  background: transparent;
  border: 1px solid $border-color;
  border-radius: 2px;
  color: $primary-color;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s ease;

  @include button-hover;

  .todo-item:hover & {
    opacity: 1;
  }

  &:focus {
    opacity: 1;
    @include focus-styles;
  }
}

// Empty State
.empty-state {
  padding: #{$spacing-unit * 4}px #{$spacing-unit * 2}px;
  text-align: center;
  color: $empty-state-color;
  font-size: 16px;
  font-weight: 300;
  background: $light-gray;
  border-top: 1px solid $border-color;
  min-height: 100px;
  @include flex(column, center, center);
}

// Responsive Design
@media (max-width: 600px) {
  .todo-mvc-container {
    max-width: 100%;
    margin: #{$spacing-unit}px;
    padding: #{$spacing-unit * 1.5}px;

    h1 {
      font-size: 24px;
      margin-bottom: #{$spacing-unit * 2}px;
    }
  }

  .input-section {
    flex-direction: column;
    gap: #{$spacing-unit}px;
  }

  .add-button {
    width: 100%;
  }

  .delete-button {
    opacity: 1;
    margin-top: #{$spacing-unit / 2}px;
  }

  .stats {
    flex-direction: column;
    gap: #{$spacing-unit}px;
    text-align: center;
  }
}
